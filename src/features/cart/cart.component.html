<section class="my-20">
  <div class="md:container">
    <h1 class="font-black text-3xl text-center">
      <i
        class="fa-solid fa-cart-flatbed-suitcase text-fuchsia-700 text-3xl"
      ></i>
      MY CART  <span class="text-fuchsia-600 text-lg font-semibold">  {{ cartDetails.products.length}} items  </span> 
    </h1>

    <div class="md:grid md:grid-cols-12 gap-x-10 items-start">
      <div class="md:col-span-7  ">
        @for (record of cartDetails.products; track $index) {
        <div
          class="md:grid md:grid-cols-12 my-10  md:py-3 md:gap-3 relative md:border-t-2  border-b-2 border-gray-500 items-center"
        >
          <div class="md:col-span-2">
            <img
              [src]="record.product.imageCover"
              [alt]="record.product.title"
              class="md:w-full w-[100px]"
            />
          </div>

          <div class="md:col-span-4 px-4  md:justify-center md:flex md:flex-col">
            <div>
              <img
                [src]="record.product.brand.image"
                class="w-[60px]"
                [alt]="record.product.brand.name"
              />
            </div>

            <h2>{{ record.product.title }}</h2>

            <div class="flex items-center  gap-x-5 my-5">
              <button
              (click)=" updateCartProductQuantity( record.product._id , record.count -1 )"
                class="md:size-[50px] size-[30px]  cursor-pointer rounded-full bg-fuchsia-700"
              >
                <i class="fas fa-minus"></i>
              </button>
              <p>{{ record.count }}</p>

              <button
              (click)=" updateCartProductQuantity(record.product.id , record.count + 1)"
                class="md:size-[50px] size-[30px] cursor-pointer rounded-full bg-fuchsia-700"
              >
                <i class="fas fa-plus"></i>
              </button>
            </div>
          </div>

          <div class="md:col-span-2 ">
            <h3 class="font-bold">Each</h3>
            <span class="text-fuchsia-950">
              {{ record.price | currency : "GBP" }}
            </span>
          </div>

          <div class="md:col-span-2">
            <h3 class="font-bold">Quantity</h3>
            {{ record.count }}
          </div>

          <div class="md:col-span-2 relative">
            <h3 class="font-bold">Total</h3>
            <span class="text-fuchsia-950">
              {{ record.price * record.count | currency : "GBP" }}
            </span>
          </div>

          <button
          (click)="removeSpecificCartItem(record.product.id)"
            class=" md:absolute cursor-pointer   md:right-0   md:bottom-0 text-xl bg-red-950 px-5 py-1 rounded-t-md text-white"
          >
            Remove
          </button>
        </div>

        }
      </div>



      <div class="col-span-5 h-[300px] shadow-xl rounded-lg relative p-4">
        <h3 class="font-bold text-2xl text-center">
          Estimated Total 
          <span class="text-fuchsia-600">
            {{  cartDetails.totalCartPrice | currency : "GBP" }}
          </span>
        </h3>

        <div class="border-3 my-3 rounded-lg p-3">
          <div class="flex justify-between mb-3">
            <p>Shipping</p>
            <span class="text-fuchsia-600">TBO</span>
          </div>

          <div class="flex justify-between mb-3">
            <p>Discount</p>
            <span class="text-fuchsia-600">-0$</span>
          </div>

          <div class="flex justify-between mb-3">
            <p>Tax</p>
            <span class="text-fuchsia-600">TBO</span>
          </div>
        </div>

        <div class="absolute bottom-0 left-1/2 -translate-x-[50%]">
          <button  [routerLink]="['/payment' , cartId ]"   class="bg-fuchsia-900 py-4 px-20 cursor-pointer text-white">
            <i class="fa-solid fa-lock"></i> CheckOut
          </button>
        </div>
      </div>
    </div>

    @if( cartDetails.products.length    > 0 ) {
        <button (click)="clearUserCart()"  class=" cursor-pointer bg-red-950 py-3 mt-10 rounded-lg text-white w-full"><i class="fa-solid fa-trash-can"></i> clear Cart </button>
    }
 

</div>
</section>
